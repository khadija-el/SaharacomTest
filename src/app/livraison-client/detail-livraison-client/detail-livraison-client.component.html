<div class="example-container mat-elevation-z4 mt-2">
    <div class="example-loading-shade" *ngIf="isLoadingResults">
      <mat-spinner *ngIf="isLoadingResults"></mat-spinner>
    </div>
  
  
    <div class="example-table-container">
      <form [formGroup]="form" autocomplete="off">
        <table mat-table #table formArrayName="dataSource" [dataSource]="dataSourceFA.controls" multiTemplateDataRows
          [trackBy]="trackByFn" matSort>
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>#</th>
            <td mat-cell *matCellDef="let row; let i = dataIndex">
              <strong>ID {{i + 1}} {{row.value.article}} </strong>
            </td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>
  
           <ng-container matColumnDef="article">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Article</th>
            <td mat-cell *matCellDef="let row" [formGroup]="row">
              <!-- <app-table-auto-complete
                [options]="{ key: 'numero', serviceName: 'articles', value: row.value.article}"
                (selectChange)="rowChange(row, $event)" formControlName="idArticle"></app-table-auto-complete> -->
            </td>
            <td mat-footer-cell *matFooterCellDef> Total </td>
          </ng-container> 
  
          <ng-container matColumnDef="qte">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>qte</th>
            <td mat-cell *matCellDef="let row" [formGroup]="row">
              <mat-form-field floatLabel="never" appearance="fill" class="mat-table-form-field">
                <input matInput placeholder="qte" formControlName="qte" required>
              </mat-form-field>
            </td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>
  
          <ng-container matColumnDef="puvhT_Brut">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>puvhT_Brut</th>
            <td mat-cell *matCellDef="let row" [formGroup]="row">
              <mat-form-field floatLabel="never" appearance="fill" class="mat-table-form-field">
                <input matInput placeholder="puvhT_Brut" formControlName="puvhT_Brut" required>
              </mat-form-field>
            </td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>
  
          <ng-container matColumnDef="remiseHT">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>remiseHT</th>
            <td mat-cell *matCellDef="let row" [formGroup]="row">
              <mat-form-field floatLabel="never" appearance="fill" class="mat-table-form-field">
                <input matInput placeholder="remiseHT" formControlName="remiseHT" required>
              </mat-form-field>
            </td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>
  
          <ng-container matColumnDef="montantHT">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>montantHT</th>
            <td mat-cell *matCellDef="let row" [formGroup]="row">
              <mat-form-field floatLabel="never" appearance="fill" class="mat-table-form-field">
                <input matInput placeholder="montantHT" formControlName="montantHT" required>
              </mat-form-field>
            </td>
            <td mat-footer-cell *matFooterCellDef>
              <mat-form-field floatLabel="never" appearance="fill" class="mat-table-form-field">
                <input matInput placeholder="total HT" [value]="totalHT" readonly>
              </mat-form-field>
            </td>
          </ng-container>
  
          <ng-container matColumnDef="tva">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>prix tva</th>
            <td mat-cell *matCellDef="let row, let i=index" [formGroup]="row">
              <mat-form-field floatLabel="never" appearance="fill" class="mat-table-form-field">
                <input matInput placeholder="tva" formControlName="tva" required>
              </mat-form-field>
            </td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>
  
          <ng-container matColumnDef="option" style="flex-direction: row-reverse;">
            <th mat-header-cell *matHeaderCellDef>
              <button mat-icon-button color="primary" (click)="add()">
                <mat-icon>add</mat-icon>
              </button>
  
              <!-- <button mat-icon-button color="accent" (click)="generatePdf()">
                <mat-icon>cloud_download</mat-icon>
              </button> -->
  
            </th>
            <td mat-cell *matCellDef="let row; let i = index">
              <div class="button-row">
                <button mat-icon-button *ngIf="dataSourceFA.length > 1" color="warn" (click)="delete(i)">
                  <mat-icon>delete_sweep</mat-icon>
                </button>
              </div>
            </td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;" (input)="rowChange(row)"></tr>
          <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
        </table>
      </form>
  
    </div>
  
  </div>
  
